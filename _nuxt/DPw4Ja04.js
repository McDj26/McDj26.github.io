import{_ as Y}from"./BBzDqOAK.js";import{u as A,G as y}from"./DEFGlCPr.js";import{i as $,a as B,r as j}from"./CWTNhToz.js";import D from"./DUuHxR7h.js";import F from"./AVzO2zfj.js";import P from"./BXTP1BCt.js";import U from"./Dl7_ZJ4u.js";import q from"./CmlIcccs.js";import G from"./y4NMJCtF.js";import{e as X,r as V,f as b,g as z,o as J,c as K,b as g,w as Q}from"./i0ZuEPR1.js";import"./BuxbjT3W.js";import"./DlAUqK2U.js";import"./CUjwmHhY.js";import"./DjShogFW.js";import"./DyP15Llo.js";import"./snQpSsor.js";import"./DwJPoSdB.js";var Z=/\s/;function C(e){for(var t=e.length;t--&&Z.test(e.charAt(t)););return t}var k=/^\s+/;function ee(e){return e&&e.slice(0,C(e)+1).replace(k,"")}var I=NaN,ne=/^[-+]0x[0-9a-f]+$/i,te=/^0b[01]+$/i,ie=/^0o[0-7]+$/i,oe=parseInt;function L(e){if(typeof e=="number")return e;if($(e))return I;if(B(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=B(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=ee(e);var n=te.test(e);return n||ie.test(e)?oe(e.slice(2),n?2:8):ne.test(e)?I:+e}var S=function(){return j.Date.now()},re="Expected a function",se=Math.max,de=Math.min;function M(e,t,n){var i,u,c,d,o,f,m=0,l=!1,s=!1,h=!0;if(typeof e!="function")throw new TypeError(re);t=L(t)||0,B(n)&&(l=!!n.leading,s="maxWait"in n,c=s?se(L(n.maxWait)||0,t):c,h="trailing"in n?!!n.trailing:h);function w(r){var a=i,p=u;return i=u=void 0,m=r,d=e.apply(p,a),d}function T(r){return m=r,o=setTimeout(v,t),l?w(r):d}function O(r){var a=r-f,p=r-m,R=t-a;return s?de(R,c-p):R}function _(r){var a=r-f,p=r-m;return f===void 0||a>=t||a<0||s&&p>=c}function v(){var r=S();if(_(r))return x(r);o=setTimeout(v,O(r))}function x(r){return o=void 0,h&&i?w(r):(i=u=void 0,d)}function W(){o!==void 0&&clearTimeout(o),m=0,i=f=u=o=void 0}function N(){return o===void 0?d:x(S())}function E(){var r=S(),a=_(r);if(i=arguments,u=this,f=r,a){if(o===void 0)return T(f);if(s)return clearTimeout(o),o=setTimeout(v,t),w(f)}return o===void 0&&(o=setTimeout(v,t)),d}return E.cancel=W,E.flush=N,E}var fe="Expected a function";function ue(e,t,n){var i=!0,u=!0;if(typeof e!="function")throw new TypeError(fe);return B(n)&&(i="leading"in n?!!n.leading:i,u="trailing"in n?!!n.trailing:u),M(e,t,{leading:i,maxWait:t,trailing:u})}const H=new Set,me=(e,t,n)=>{H.add(e);let i=e.previousElementSibling;for(;i&&!H.has(i);)i=i.previousElementSibling;const{top:u,bottom:c}=e.getBoundingClientRect();u<=window.innerHeight/2&&c>=window.innerHeight/2&&(e.hasEnteredBefore||(n==null||n(e),e.hasEnteredBefore=!0),t==null||t(e));const d=[];if(i){const m=M(l=>{if(l.deltaY>0){let{bottom:s}=i.getBoundingClientRect();s>=0&&s<window.innerHeight&&window.scrollTo({top:e.getBoundingClientRect().top+window.scrollY})}else if(l.deltaY<0){let{top:s}=e.getBoundingClientRect(),{top:h,bottom:w}=i.getBoundingClientRect(),T=w-h;s>0&&s<=window.innerHeight&&window.scrollTo({top:i.getBoundingClientRect().top+window.scrollY+T-window.innerHeight})}},400);window.addEventListener("wheel",m,{passive:!0}),d.push(()=>{window.removeEventListener("wheel",m)})}let o=window.scrollY;const f=ue(m=>{const l=window.scrollY;if(o<l){const{top:s}=e.getBoundingClientRect();s>=0&&s<=window.innerHeight&&(t==null||t(e),e.hasEnteredBefore||(e.hasEnteredBefore=!0,n==null||n(e)))}else if(i){const{bottom:s}=i.getBoundingClientRect();s>0&&s<=window.innerHeight&&(t==null||t(i),i.hasEnteredBefore||(i.hasEnteredBefore=!0,n==null||n(i)))}o=l},200);return window.addEventListener("scroll",f,{passive:!0}),d.push(()=>{window.removeEventListener("scroll",f)}),()=>{d.forEach(m=>m())}},ce=e=>{const t=e.map(n=>me(n.el,n.enterCallback,n.firstEnterCallback));return()=>{t.forEach(n=>n())}},He=X({__name:"index",setup(e){let t=V(),n,i;A({title:"Dajia"});const u=()=>{const{bottom:d}=n.getBoundingClientRect();i&&(d<80?i.classList.add("header-solid"):i.classList.remove("header-solid"))};let c;return b(()=>{n=document.querySelector("#board-ref"),i=document.querySelector("#header-ref"),window.addEventListener("scroll",u),u();const d=[];for(let o=n;o;o=o.nextElementSibling)o.id&&o instanceof HTMLDivElement&&d.push({el:o,enterCallback:f=>y.emit("onEnter",f.id),firstEnterCallback:f=>y.emit("firstEnter",f.id)});c=ce(d)}),z(()=>{window.removeEventListener("scroll",u),c&&c()}),(d,o)=>{const f=Y;return J(),K("div",{class:"home",ref_key:"homeRef",ref:t},[g(f,null,{default:Q(()=>[g(F)]),_:1}),g(D),g(P),g(q),g(U),g(G)],512)}}});export{He as default};
